---- 
## Initial Information

- Attacker IP = 10.129.241.49
- Victim IP = 10.129.223.81
---
## Initial scan

- Did initial ping to ensure that we can scan   this was succesful
```shell
ping 10.129.223.81
PING 10.129.223.81 (10.129.223.81) 56(84) bytes of data.
64 bytes from 10.129.223.81: icmp_seq=1 ttl=63 time=18.0 ms
64 bytes from 10.129.223.81: icmp_seq=2 ttl=63 time=18.2 ms
64 bytes from 10.129.223.81: icmp_seq=3 ttl=63 time=16.9 ms
64 bytes from 10.129.223.81: icmp_seq=4 ttl=63 time=17.2 ms
^C
--- 10.129.223.81 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3101ms
rtt min/avg/max/mdev = 16.937/17.563/18.213/0.532 ms
```

- Did an initial nmap scan to see if any if the initial 1000 ports were open, they were all closed
```shell

nmap -O 10.129.223.81 
Starting Nmap 7.93 ( https://nmap.org ) at 2023-03-22 18:54 EDT
Nmap scan report for 10.129.223.81
Host is up (0.019s latency).
All 1000 scanned ports on 10.129.223.81 are in ignored states.
Not shown: 1000 closed tcp ports (reset)
Too many fingerprints match this host to give specific OS details
Network Distance: 2 hops

OS detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 3.11 seconds

```

- did a larger scan and found that redis is running on port 6379, couldnt find the OS 
```shell

nmap -p-  10.129.223.81 
Starting Nmap 7.93 ( https://nmap.org ) at 2023-03-22 19:00 EDT
Nmap scan report for 10.129.223.81
Host is up (0.050s latency).
Not shown: 65534 closed tcp ports (reset)
PORT     STATE SERVICE
6379/tcp open  redis

Nmap done: 1 IP address (1 host up) scanned in 24.58 seconds

```

- Logged in using the rediscli found 4 keys at index 0
```shell

redis-cli -h 10.129.223.81 -p 6379      


10.129.223.81:6379> info keyspace

 Server
redis_version:5.0.7
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:66bd629f924ac924
redis_mode:standalone
os:Linux 5.4.0-77-generic x86_64
arch_bits:64
multiplexing_api:epoll
atomicvar_api:atomic-builtin
gcc_version:9.3.0
process_id:753
run_id:9dfb827757f3d96e5afecaf674fb8c5d8a423ab8
tcp_port:6379
uptime_in_seconds:1474
uptime_in_days:0
hz:10
configured_hz:10
lru_clock:1805250
executable:/usr/bin/redis-server
config_file:/etc/redis/redis.conf

# Clients
connected_clients:1
client_recent_max_input_buffer:2
client_recent_max_output_buffer:0
blocked_clients:0

# Memory
used_memory:859624
used_memory_human:839.48K
used_memory_rss:5996544
used_memory_rss_human:5.72M
used_memory_peak:859624
used_memory_peak_human:839.48K
used_memory_peak_perc:100.12%
used_memory_overhead:846142
used_memory_startup:796224
used_memory_dataset:13482
used_memory_dataset_perc:21.26%
allocator_allocated:1546648
allocator_active:1880064
allocator_resident:9101312
total_system_memory:2084024320
total_system_memory_human:1.94G
used_memory_lua:41984
used_memory_lua_human:41.00K
used_memory_scripts:0
used_memory_scripts_human:0B
number_of_cached_scripts:0
maxmemory:0
maxmemory_human:0B
maxmemory_policy:noeviction
allocator_frag_ratio:1.22
allocator_frag_bytes:333416
allocator_rss_ratio:4.84
allocator_rss_bytes:7221248
rss_overhead_ratio:0.66
rss_overhead_bytes:-3104768
mem_fragmentation_ratio:7.33
mem_fragmentation_bytes:5178928
mem_not_counted_for_evict:0
mem_replication_backlog:0
mem_clients_slaves:0
mem_clients_normal:49694
mem_aof_buffer:0
mem_allocator:jemalloc-5.2.1
active_defrag_running:0
lazyfree_pending_objects:0

# Persistence
loading:0
rdb_changes_since_last_save:0
rdb_bgsave_in_progress:0
rdb_last_save_time:1679526277
rdb_last_bgsave_status:ok
rdb_last_bgsave_time_sec:0
rdb_current_bgsave_time_sec:-1
rdb_last_cow_size:413696
aof_enabled:0
aof_rewrite_in_progress:0
aof_rewrite_scheduled:0
aof_last_rewrite_time_sec:-1
aof_current_rewrite_time_sec:-1
aof_last_bgrewrite_status:ok
aof_last_write_status:ok
aof_last_cow_size:0

# Stats
total_connections_received:7
total_commands_processed:8
instantaneous_ops_per_sec:0
total_net_input_bytes:334
total_net_output_bytes:11586
instantaneous_input_kbps:0.00
instantaneous_output_kbps:0.00
rejected_connections:0
sync_full:0
sync_partial_ok:0
sync_partial_err:0
expired_keys:0
expired_stale_perc:0.00
expired_time_cap_reached_count:0
evicted_keys:0
keyspace_hits:0
keyspace_misses:0
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:383
migrate_cached_sockets:0
slave_expires_tracked_keys:0
active_defrag_hits:0
active_defrag_misses:0
active_defrag_key_hits:0
active_defrag_key_misses:0

# Replication
role:master
connected_slaves:0
master_replid:c35aa55fa471a7f745d2b899fd1302e309a032da
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:0
second_repl_offset:-1
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0

# CPU
used_cpu_sys:1.383408
used_cpu_user:1.578680
used_cpu_sys_children:0.000000
used_cpu_user_children:0.001848

# Cluster
cluster_enabled:0

# Keyspace
db0:keys=4,expires=0,avg_ttl=0



```


- Selected Index 0 and found the keys for it 
```shell
10.129.223.81:6379> SELECT 0
OK
10.129.223.81:6379> CLIENT LIST
id=9 addr=10.10.14.136:44828 fd=8 name= age=892 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client
10.129.223.81:6379> keys *
1) "temp"
2) "stor"
3) "numb"
4) "flag"



```
- enumerate through the keys 
```shell

10.129.223.81:6379> get temp
"1c98492cd337252698d0c5f631dfb7ae"
10.129.223.81:6379> get stor
"e80d635f95686148284526e1980740f8"
10.129.223.81:6379> get numb
"bb2c8a7506ee45cc981eb88bb81dddab"
10.129.223.81:6379> get flag
"03e1d2b376c37ab3f5319922053953eb"
10.129.223.81:6379> 


```
Got the flag by enumerating through the keys

--- 
## Resources
- Nmap scan for more ports - https://nmap.org/book/port-scanning-options.html
- Redis Login and info command: https://redis.io/docs/ui/cli/#host-port-password-and-database
- Iteract over keys of a selected Index -https://scalegrid.io/blog/redis-iterating-over-keys/